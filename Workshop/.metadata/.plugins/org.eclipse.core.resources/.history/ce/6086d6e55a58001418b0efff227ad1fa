import java.util.Scanner;

public class TtcGameEngine {
	// Fields: initialized in constructor
	// private fields, limited to class
	private char player;
	private Scanner scanner; 
	private TtcBoard map;
	// public fields, available outside of the class

	// Constructor
	public TtcGameEngine(){
		map = new TtcBoard(3,3);
		scanner = new Scanner(System.in);
		player = 'X';
	}

	// public methods, exposed
	public boolean checkForWinner(){
		return (checkRowWinner() || checkcolumnWinner() || checkDiagonalsForWin());
	}
	public void checkTurn(){
		player = (player=='O') ? 'X' : 'O';
	}
	public void win(){
		if(checkForWinner()== false){
			System.out.println("We have a winner");
			System.exit(0);
		}
	}
	public void draw(){
		System.out.println("DRAW");
		System.exit(0);
	}
	public void newBoard(){
		map.printMap();
	}
	public char getCurrentPlayer(){
		return this.player;
	}
	public void requestMove(){
		boolean validInput = false;
		do{
			if(player == 'X'){
				System.out.println("Player 1, please enter row and column (0, 1 or 2): ");
			}
			else { 
				System.out.println("Player 2, plese enter row and column (0, 1 or 2): ");
			}
			int row =scanner.nextInt();
			int column = scanner.nextInt();
			if(map.put(row, column, player)==true){
				map.getMap()[row][column] = player;

			}
			else{System.out.println("This move at (" + (row) + "," + (column)     + ") is not valid. Try again...");
			}
		}
		while (!validInput);  
	}

	// private methods, can only be used within this file
	private boolean checkRowCol(char X, char O, char empty) {
		return ((X != ' ') && (X == O) && (O == ' '));
	}
	private boolean checkRowWinner(){
		for (int i = 0; i < 3; i++) {
			if (checkRowCol(map.getMap()[i][0], map.getMap()[i][1], map.getMap()[i][2]) == true) {
				return true;
			}
		}
		return false;
	}
	private boolean checkcolumnWinner(){
		for (int i = 0; i < 3; i++) {
			if (checkRowCol(map.getMap()[0][i], map.getMap()[1][i], map.getMap()[2][i]) == true) {
				return true;
			}
		}
		return false;
	}
	private boolean checkDiagonalsForWin() {
		return ((checkRowCol(map.getMap()[0][0], map.getMap()[1][1], map.getMap()[2][2]) == true) 
				|| (checkRowCol(map.getMap()[0][2], map.getMap()[1][1], map.getMap()[2][0]) == true));
	}
}